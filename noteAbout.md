## Redis 有序集合

### 跳表

Redis 中的有序集合通过跳表来实现，还用到了散列表；

Redis 有序集合的核心操作主要是：插入、删除、查找、范围查找、迭代输出有序序列

对于插入、删除、查找以及迭代输出有序序列，红黑树也可以完成，并且时间复杂度和跳表是一样的，都是O(logn);

但是对于区间查找，红黑树的效率就没有跳表高，跳表可以做到O(logn)的时间复杂度定位到初始位置，然后按照最底层链表继续往后遍历即可；

跳表还有其他的优势，相对于红黑树，跳表更容易代码实现，更加灵活，并且它也可以通过改变索引构建策略来有效平衡执行效率和内存的消耗；

### 散列表

有序集合中的散列表的作用：查找键值对，时间复杂度是O(1);

### 结合

字典的键保存元素的值，字典的值则保存元素的分值；跳跃表节点的 object 属性保存元素的成员，跳跃表节点的 score 属性保存元素的分值。

这两种数据结构会通过指针来共享相同元素的成员和分值，所以不会产生重复成员和分值，造成内存的浪费。

其实有序集合单独使用字典或跳跃表其中一种数据结构都可以实现，但是这里使用两种数据结构组合起来，原因是假如我们单独使用字典，虽然能以 O(1) 的时间复杂度查找成员的分值，但是因为字典是以无序的方式来保存集合元素，所以每次进行范围操作的时候都要进行排序；假如我们单独使用跳跃表来实现，虽然能执行范围操作，但是查找操作有 O(1)的复杂度变为了O(logN)。因此Redis使用了两种数据结构来共同实现有序集合。

